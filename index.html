<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Allows to display a progress bar in the R console for long running computations taking place in c++ code, and support for interrupting those computations even in multithreaded code, typically using OpenMP.">
<title>An Interruptible Progress Bar with OpenMP Support for C++ in R Packages • RcppProgress</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="An Interruptible Progress Bar with OpenMP Support for C++ in R Packages">
<meta property="og:description" content="Allows to display a progress bar in the R console for long running computations taking place in c++ code, and support for interrupting those computations even in multithreaded code, typically using OpenMP.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">RcppProgress</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/01_using_rcpp_progress.html">Using RcppProgress</a>
    <a class="dropdown-item" href="articles/05_rcpp_armadillo.html">Using RcppProgress with RcppArmadillo</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/kforner/rcpp_progress/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="rcppprogress">RcppProgress<a class="anchor" aria-label="anchor" href="#rcppprogress"></a>
</h1></div>
<!-- badges: start -->

<p>a R package that provides a C++ interruptible progress bar with <strong>OpenMP</strong> support for C++ code in R packages:</p>
<ul>
<li>can check for user interrupts in your C++ code</li>
<li>can display a progress bar monitoring your C++ computation</li>
<li>is compatible with multi-threaded C++ code (e.g. <a href="https://www.openmp.org/" class="external-link">openMP</a>)</li>
</ul>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>Usually you write C++ code with R when you want to speedup some calculations. Depending on the parameters, and especially during the development, it is difficult to anticipate the execution time of your computation, so that you do not know if you have to wait for one minute or several hours.</p>
<p>RcppProgress is a tool to help you monitor the execution time of your C++ code, by providing a way to <strong>interrupt</strong> the execution inside the C++ code, and also to display a <strong>progress bar</strong> indicative of the state of your computation.</p>
<p>Additionally, it is compatible with multithreaded code, for example using <strong>OpenMP</strong>, which is not as trivial as it may seem since you cannot just stop the execution in one thread. Also, not all threads should be writing in the console to avoid garbled output.</p>
</div>
<div class="section level2">
<h2 id="installing">Installing<a class="anchor" aria-label="anchor" href="#installing"></a>
</h2>
<ul>
<li>from CRAN: <code>install.packages("RcppProgress")</code>
</li>
<li>from github: <code>remotes::install_github('kforner/rcpp_progress')</code>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="quick-try">Quick try<a class="anchor" aria-label="anchor" href="#quick-try"></a>
</h2>
<p>There are test functions included in <code>RcppProgress</code> for convenience, that let you run some R functions calling C++ code, interruptible (by typing <code>CTRL+c</code>) and displaying a progress bar:</p>
<ul>
<li><code><a href="reference/test_multithreaded.html">test_multithreaded()</a></code></li>
<li><code><a href="reference/test_amardillo_multithreaded.html">test_amardillo_multithreaded()</a></code></li>
<li><code><a href="reference/test_eta_progress_bar.html">test_eta_progress_bar()</a></code></li>
</ul>
<p>These functions use the example R packages included in the <code>RcppProgress</code> package (check the <code>inst/examples</code> in the github repository).</p>
<p>For example:</p>
<pre><code>&gt;RcppProgress::test_multithreaded()
Number of threads=4
0%   10   20   30   40   50   60   70   80   90   100%
[----|----|----|----|----|----|----|----|----|----|
**************************************************|</code></pre>
</div>
<div class="section level2">
<h2 id="inline-demo">Inline demo<a class="anchor" aria-label="anchor" href="#inline-demo"></a>
</h2>
<p>You can also test a complete example entirely in your R console!</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># our C++ code</span></span>
<span><span class="va">CODE</span> <span class="op">&lt;-</span> <span class="st">r"(</span></span>
<span><span class="st">#ifdef _OPENMP</span></span>
<span><span class="st">#include &lt;omp.h&gt;</span></span>
<span><span class="st">#endif</span></span>
<span><span class="st">// [[Rcpp::plugins(openmp)]]</span></span>
<span><span class="st">// [[Rcpp::depends(RcppProgress)]]</span></span>
<span><span class="st">#include &lt;progress.hpp&gt;</span></span>
<span><span class="st">#include &lt;progress_bar.hpp&gt;</span></span>
<span><span class="st"></span></span>
<span><span class="st">// [[Rcpp::export]]</span></span>
<span><span class="st">double long_computation_omp_progress(int nb, int threads=1) {</span></span>
<span><span class="st">#ifdef _OPENMP</span></span>
<span><span class="st">    if ( threads &gt; 0 )</span></span>
<span><span class="st">        omp_set_num_threads( threads );</span></span>
<span><span class="st">#endif</span></span>
<span><span class="st">    Progress p(nb, true);</span></span>
<span><span class="st">    double sum = 0;</span></span>
<span><span class="st">#pragma omp parallel for schedule(dynamic)   </span></span>
<span><span class="st">    for (int i = 0; i &lt; nb; ++i) {</span></span>
<span><span class="st">        double thread_sum = 0;</span></span>
<span><span class="st">        if ( ! Progress::check_abort() ) {</span></span>
<span><span class="st">            p.increment(); // update progress</span></span>
<span><span class="st">            for (int j = 0; j &lt; nb; ++j) {</span></span>
<span><span class="st">                thread_sum += R::dlnorm(i+j, 0.0, 1.0, 0);</span></span>
<span><span class="st">            }</span></span>
<span><span class="st">        }</span></span>
<span><span class="st">        sum += thread_sum;</span></span>
<span><span class="st">    }</span></span>
<span><span class="st">  </span></span>
<span><span class="st">    return sum + nb;</span></span>
<span><span class="st">}</span></span>
<span><span class="st">)"</span></span>
<span></span>
<span><span class="co"># compile and run it</span></span>
<span><span class="fu">Rcpp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/Rcpp/man/sourceCpp.html" class="external-link">sourceCpp</a></span><span class="op">(</span>code <span class="op">=</span> <span class="va">CODE</span><span class="op">)</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">long_computation_omp_progress</span><span class="op">(</span><span class="fl">10000</span>, <span class="fl">4</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>There is a detailed example on Rcpp Gallery: <a href="http://gallery.rcpp.org/articles/using-rcppprogress/" class="external-link uri">http://gallery.rcpp.org/articles/using-rcppprogress/</a>. It has been improved an is now available as a vignette TODO: insert link</p>
</div>
<div class="section level2">
<h2 id="feedback">Feedback<a class="anchor" aria-label="anchor" href="#feedback"></a>
</h2>
<p>Please use github issues to provide feedback, report bugs and propose new features.</p>
</div>
<div class="section level2">
<h2 id="development">Development<a class="anchor" aria-label="anchor" href="#development"></a>
</h2>
<p>cf <a href="dev.html">here</a></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=RcppProgress" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/kforner/rcpp_progress/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/kforner/rcpp_progress/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>GPL (&gt;= 3)</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing RcppProgress</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Karl Forner <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/kforner/rcpp_progress/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/kforner/rcpp_progress/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/kforner/rcpp_progress?branch=master" class="external-link"><img src="https://codecov.io/gh/kforner/rcpp_progress/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://cran.r-project.org/package=RcppProgress" class="external-link"><img src="http://www.r-pkg.org/badges/version/RcppProgress" alt="CRAN_Status_Badge"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Karl Forner.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
